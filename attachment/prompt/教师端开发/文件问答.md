介绍
文件问答支持通过提取文件（PDF、DOC、PPT、JPG等格式）的内容，并基于文件内容进行问答，下面我们用一个代码示例来讲述如何通过 API 实现文件上传和文件问答：

利用开放平台的文件上传功能，完成文件的上传；
通过文件内容抽取接口，提取上传文件中的的文本；
将抽取到的文本内容至messages列表中；
调用详情请参考：接口文档

单文件问答示例
from zhipuai import ZhipuAI
from pathlib import Path
import json

# 填写您自己的APIKey
client = ZhipuAI(api_key="your_api_key_here")

# 格式限制：.PDF .DOCX .DOC .XLS .XLSX .PPT .PPTX .PNG .JPG .JPEG .CSV .PY .TXT .MD .BMP .GIF
# 大小：单个文件50M、总数限制为100个文件
file_object = client.files.create(file=Path("aaa.pdf"), purpose="file-extract")

# 获取文本内容
file_content = json.loads(client.files.content(file_id=file_object.id).content)["content"]

# 生成请求消息
message_content = f"请对\n{file_content}\n的内容进行分析，并撰写一份论文摘要。"

response = client.chat.completions.create(
    model="glm-4-long",  
    messages=[
        {"role": "user", "content": message_content}
    ],
)

print(response.choices[0].message)
多文件问答示例
from zhipuai import ZhipuAI
from pathlib import Path
import json

# 填写您自己的APIKey
client = ZhipuAI(api_key="your_api_key_here")

# 上传并提取文本内容
file_01 = client.files.create(file=Path("aaa.pdf"), purpose="file-extract")
content_01 = json.loads(client.files.content(file_01.id).content)["content"]

# 上传并提取文本内容
file_02 = client.files.create(file=Path("bbb.pdf"), purpose="file-extract")
content_02 = json.loads(client.files.content(file_02.id).content)["content"]

# 生成请求消息，将不同文件的内容放入消息中
message_content = (
    "请对以下论文进行分析，并且生成一份论文综述：\n\n"
    "第一篇论文内容如下：\n"    
    f"{content_01}\n\n"
    "第二篇论文内容如下：\n"
    f"{content_02}"
)

response = client.chat.completions.create(
    model="glm-4-long",  
    messages=[
        {"role": "user", "content": message_content}
    ],
)

print(response.choices[0].message)
删除文件
每个用户最多可以上传100个文件，建议在提取数据后删除文件，并将文件抽取内容存储到本地，避免重复上传。

from zhipuai import ZhipuAI

client = ZhipuAI(api_key="") # 请填写您自己的APIKey

result = client.files.delete(
    file_id="文件id"         #支持retrieval、batch、fine-tune、file-extract文件
)
常见问题
支持哪些文件格式？
支持.PDF .DOCX .DOC .XLS .XLSX .PPT .PPTX .PNG .JPG .JPEG .CSV .PY .TXT .MD .BMP .GIF等文件格式。
说明：不支持扫描版PDF文件

文件大小有什么限制？
单个文件的最大限制是50MB、图片的最大限制是5MB。

可以上传多少文件？
每个用户最多可以上传100个文件。
建议在提取数据后删除文件，并将文件抽取内容存储到本地，避免重复上传。请参考：删除接口
图片内容获取是如何实现的？
服务主要使用于OCR技术来实现，而非使用图像理解模型。因此无法理解图像内容。